"use strict";(self.webpackChunkshop=self.webpackChunkshop||[]).push([[596],{2596:(Y,g,r)=>{r.r(g),r.d(g,{UserModule:()=>q});var s=r(8583),c=r(6983),u=r(5758),p=r(8002),l=r(9773),d=r(5304),f=r(5106),t=r(7716),m=r(427),v=r(3065),h=r(2086),C=r(1095);let I=(()=>{class n{constructor(e){this.userService=e}onDelete(e){this.userService.deleteFromCart(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart-item"]],inputs:{cartItem:"cartItem"},decls:17,vars:5,consts:[[1,"cart-item"],["alt","",3,"src"],[1,"name-and-amount"],[1,"name"],[1,"amount"],["mat-button","",3,"disabled"],["mat-button",""],[1,"control"],[1,"price"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t._uU(7,"-"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"button",6),t._uU(11,"+"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return o.onDelete(o.cartItem.id)}),t._uU(16,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("src",o.cartItem.imageUrls[0],t.LSH),t.xp6(3),t.Oqu(o.cartItem.name),t.xp6(2),t.Q6J("disabled",1===o.cartItem.amount),t.xp6(3),t.hij(" ",o.cartItem.amount," "),t.xp6(5),t.hij("",o.cartItem.price,"\u0440"))},directives:[C.lW],styles:[".cart-item[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid rgba(0,0,0,.1);align-items:center;height:100px;justify-content:space-between}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:75px;max-height:75px}.cart-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#00f;text-decoration:underline}.cart-item[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;border:none;outline:none;background:none}.cart-item[_ngcontent-%COMP%]   .name-and-amount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),n})();function Z(n,i){1&n&&t._UZ(0,"app-cart-item",7),2&n&&t.Q6J("cartItem",i.$implicit)}function x(n,i){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,Z,1,1,"app-cart-item",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t._uU(4),t.qZA(),t.TgZ(5,"button",6),t._uU(6,"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.cartItems),t.xp6(3),t.hij("\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",e.getPrice(),"\u0440.")}}function P(n,i){1&n&&(t.TgZ(0,"div",8),t._uU(1,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"),t.qZA())}let O=(()=>{class n{constructor(e,o,a){this.userService=e,this.store=o,this.shopService=a,this.cartItems$=this.store.select(f.Ns),this.cartItems=[]}ngOnInit(){this.userService.getUserInfo(),this.cartItems$.pipe((0,p.U)(e=>e.map(o=>this.shopService.getGoodsItem(o))),(0,l.zg)(e=>(0,u.D)(e)),(0,d.K)(e=>{throw new Error(e)})).subscribe(e=>{this.cartItems=e.map(o=>Object.assign(Object.assign({},o),{amount:1}))})}getPrice(){return this.cartItems.length?this.cartItems.reduce((e,o)=>e+o.price,0):0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.K),t.Y36(v.yh),t.Y36(h.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart-page"]],decls:3,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["noItems",""],[1,"container"],[3,"cartItem",4,"ngFor","ngForOf"],[1,"control"],[1,"price"],["mat-raised-button",""],[3,"cartItem"],[1,"container","free"]],template:function(e,o){if(1&e&&(t.YNc(0,x,7,2,"div",0),t.YNc(1,P,2,0,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",o.cartItems.length)("ngIfElse",a)}},directives:[s.O5,s.sg,C.lW,I],styles:[".free[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:25px;height:100%}.control[_ngcontent-%COMP%]{padding:10px;width:300px;height:85px;display:flex;justify-content:space-between;flex-direction:column;align-items:flex-end;width:100%}.control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}"]}),n})();var M=r(5873),T=r(6627);function A(n,i){1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"mat-icon",9),t._uU(2,"check_circle"),t.qZA(),t.TgZ(3,"span",9),t._uU(4,"\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"),t.qZA(),t.qZA())}function _(n,i){1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"mat-icon",9),t._uU(2,"schedule"),t.qZA(),t.TgZ(3,"span",9),t._uU(4,"\u041d\u0430 \u0437\u0430\u043a\u0430\u0437"),t.qZA(),t.qZA())}let y=(()=>{class n{constructor(e){this.router=e}onClickGoodsItem(e){const{category:o,subCategory:a,id:S}=e;this.router.navigate(["category",o,a,S])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-favorite-item"]],inputs:{goodsItem:"goodsItem"},decls:12,vars:6,consts:[[1,"goods-item"],[1,"picture","flex"],["alt","",3,"src"],[1,"name","flex",3,"click"],["class","status flex",4,"ngIf"],[1,"price","flex"],[1,"rating","flex"],[3,"rate"],[1,"status","flex"],[2,"color","gray"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3),t.NdJ("click",function(){return o.onClickGoodsItem(o.goodsItem)}),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.qZA(),t.YNc(6,A,5,0,"div",4),t.YNc(7,_,5,0,"div",4),t.TgZ(8,"div",5),t._uU(9),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"ngb-rating",7),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("src",o.goodsItem.imageUrls[0],t.LSH),t.xp6(3),t.Oqu(o.goodsItem.name),t.xp6(1),t.Q6J("ngIf",o.goodsItem.availableAmount),t.xp6(1),t.Q6J("ngIf",!o.goodsItem.availableAmount),t.xp6(2),t.hij("",o.goodsItem.price,",00 \u0440."),t.xp6(2),t.Q6J("rate",o.goodsItem.rating))},directives:[s.O5,M.OC,T.Hw],styles:[".goods-item[_ngcontent-%COMP%]{width:250px;height:500px;border:1px solid rgba(0,0,0,.1);padding:10px;margin:10px}.goods-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px;max-width:200px}.goods-item[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{margin:10px 0 0;height:200px}.goods-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-align:center;height:70px;color:#00f;text-decoration:underline}.goods-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:hover{cursor:pointer}.goods-item[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{height:50px;display:flex}.goods-item[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 0 0 3px}.goods-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{height:35px;text-align:center;font-size:20px}.goods-item[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{height:25px}.goods-item[_ngcontent-%COMP%]   .basket-button[_ngcontent-%COMP%]{height:40px;margin:0 0 5px}.goods-item[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%]{height:40px}.goods-item[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();function U(n,i){1&n&&t._UZ(0,"app-favorite-item",2),2&n&&t.Q6J("goodsItem",i.$implicit)}const F=[{path:"cart",component:O},{path:"favorite",component:(()=>{class n{constructor(e,o,a){this.userService=e,this.shopService=o,this.store=a,this.favoriteItems$=this.store.select(f.n1),this.favoriteItems=[]}ngOnInit(){this.userService.getUserInfo(),this.favoriteItems$.pipe((0,p.U)(e=>e.map(o=>this.shopService.getGoodsItem(o))),(0,l.zg)(e=>(0,u.D)(e)),(0,d.K)(e=>{throw new Error(e)})).subscribe(e=>{this.favoriteItems=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.K),t.Y36(h.d),t.Y36(v.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-favorite-page"]],decls:2,vars:1,consts:[[1,"container","flex-container"],[3,"goodsItem",4,"ngFor","ngForOf"],[3,"goodsItem"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,U,1,1,"app-favorite-item",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.favoriteItems))},directives:[s.sg,y],styles:[""]}),n})()}];let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(F)],c.Bz]}),n})();var J=r(4466);let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.ez,b,J.m]]}),n})()}}]);